<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Plánování přípravy chleba</title>
    <style>
        body {
            font-family: 'Arial', sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f4f4f4;
            color: #333;
        }

        .container {
            width: 80%;
            max-width: 800px;
            margin: 20px auto;
            padding: 20px;
            background-color: white;
            border-radius: 5px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        #startDateTime {
            padding: 8px;
            border-radius: 4px;
            border: 1px solid #ddd;
            margin-top: 10px;
            width: calc(100% - 30px);
            /* Zmenšení pro padding a tlačítko */
        }

        button {
            padding: 10px 15px;
            background-color: #4285f4;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            margin-left: 5px;
        }

        button:hover {
            background-color: #3079ed;
        }

        h1,
        h2,
        h3 {
            color: #5a5a5a;
        }

        p,
        li {
            font-size: 16px;
            color: #555;
            line-height: 1.6;
        }

        ul {
            list-style-type: none;
            /* padding: 0; */
        }

        ul li::before {
            content: '•';
            color: #4285f4;
            display: inline-block;
            width: 1em;
            margin-left: -1em;
        }

        #schedule p {
            font-size: 16px;
            color: #555;
            line-height: 1.6;
        }

        hr {
            border: none;
            height: 1px;
            background-color: #ccc;
            margin: 20px 0;
        }

        .form-row {
            display: flex;
            justify-content: start;
            align-items: center;
            margin-bottom: 10px;
        }

        .form-row input,
        .form-row button {
            margin: 5px;
        }

        /* Animace pro plynulé objevení sekce */
        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Přidání animace na sekce s recepty */
        .section {
            opacity: 0;
            /* Začneme s neviditelnou sekci */
            animation: fadeIn 1s ease-out forwards;
            /* Animace se spustí po načtení stránky */
            animation-delay: 0.5s;
            /* Zpoždění startu animace */
        }

        .collapsible {
            cursor: pointer;
            padding: 10px;
            width: 100%;
            text-align: left;
            border: none;
            outline: none;
            transition: background-color 0.2s ease;
        }

        .collapsible:after {
            content: '\002B';
            color: #777;
            font-weight: bold;
            float: right;
            margin-left: 5px;
        }

        .collapsible.active:after {
            content: "\2212";
        }

        .content {
            padding: 0 18px;
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.2s ease-out;
            background-color: #f1f1f1;
        }

        /* Responzivní styly pro mobilní zařízení */
        @media screen and (max-width: 600px) {
            .container {
                width: 95%;
                padding: 10px;
            }

            #startDateTime,
            button {
                width: 100%;
                margin-top: 5px;
            }

            button {
                margin-left: 0;
            }

            .form-row {
                flex-direction: column;
            }

            .form-row input,
            .form-row button {
                width: 100%;
                margin: 5px 0;
            }
        }
    </style>
</head>

<body>
    <div class="container">

        <div class="section">
            <h1 class="collapsible">Plánování přípravy chleba</h1>
            <div class="content">
                <div class="form-row">
                    <label for="startDateTime">Začátek přípravy:</label>
                    <input type="datetime-local" id="startDateTime" name="startDateTime">
                    <button>Vypočítat plán</button>
                </div>
                <div id="schedule" class="hidden"></div>
            </div>
        </div>
        <hr />
        <!-- Sekce pro vedení kvásku -->
        <div class="section">
            <h1 class="collapsible">Vedení kvásku</h1>
            <div class="content">
                <p>Poté, co jsme kvásek založili, bude veškerá další péče spočívat v jeho krmění – tomu se mezi pekaři říká
                    vedení kvásku.</p>
    
                <h2>3-stupňové vedení:</h2>
                <p>Jedná se o 3-stupňové vedení kvásku, které je sice náročnější na vedení, ale zajišťuje zvláště výrazlou
                    chuť a stabilitu. V prvním stupni se množí především kvasinky, v druhém stupni pak bakterie produkující
                    kyseliny. Třetí stupeň slouží k vyrovnání poměru bakterií homo- a heterofermentativního kvašení.</p>
    
                <h2>Návod pro výrobu 0,39 kg kvásku / 1 ks chleba</h2>
                <ul>
                    <li>1:00 - Vynášeme kvásek z boxu o objemu 0,13 kg. Do 0,13 kg zbylého zrna kvásku přimícháme 0,043 kg
                        žitné mouky a 0,043 l vlažné vody 32°C, přikryjeme a necháme stát 4-6 hodin při 22-26°C. Kvásek by
                        měl zvětšit objem a po nějaké době začít klesat.</li>
                    <li>5:00 - Když je kvásek hladový (jeho objem se zmenšil a už dále neklesá), přimícháme dalších 0,043 kg
                        žitné mouky a 0,021 l vlažné vody 32°C. Necháme stát asi 6 hodin při cca 30°C.</li>
                    <li>11:00 - Když je kvásek opět hladový (jeho objem se zmenšil a už dále neklesá), přimícháme dalších
                        0,043 kg žitné mouky a 0,069 l vlažné vody 32°C. Necháme stát 3-4 hodiny při 28-30°C.</li>
                    <li>15:00 - Když je kvásek ve fázi klesání nebo už je „spadlý“ úplně (cca po 4 hodinách), můžeme zadělat
                        těsto na chleba. Z kvásku odebereme 0,13 kg, které dáme do chladu v uzavřené nádobě (ne pevně
                        uzavřené!) a zbytek kvásku použijeme do chleba.</li>
                </ul>
    
                <h1>Poznámky:</h1>
                <ul>
                    <li>Teploty není třeba úzkostlivě dodržovat. Důležité je aby kvásek vždy vyběhl nahoru a pak začal
                        klesat a byl hodně kyselý (dochutnat).</li>
                    <li>Časy mezi jednotlivými krměními velmi záleží na teplotě, takže je berte jako orientační.</li>
                    <li>Kvásku nevadí, když zůstane nějakou dobu hladový.</li>
                    <li>Pokud to vypadá, že kvásek utíká z nádoby, tak je možno ho důkladně zamíchat aby spadnul dolů –
                        vůbec mu to nevadí a navíc dostane více kyslíku.</li>
                </ul>
            </div>
        </div>
        <hr />
        <!-- Sekce pro pečení chleba -->
        <div class="section">
            <h1 class="collapsible">Chleba 33</h1>
            <div class="content">
                <h2>Suroviny na jeden bochník</h2>
                <ul>
                    <li>kvas 220 g</li>
                    <li>mouka pšeničná chlebová PROBIO 330 g</li>
                    <li>voda 200 ml</li>
                    <li>sůl 20 g</li>
                    <li>drcený kmín 10 g</li>
                    <li>brambory (vařené ve slupce a nastrouhané) 140 g</li>
                </ul>
                <p>Základ dobrého chleba. Ten náš je třístupňově vedený, který je trochu náročnější na založení, ale odměnou
                    vám bude vyzrálá chuť a stabilita. Pokud vám kvásek doma umře, stavte se pro nový. Rádi vám ho dáme.</p>
                <h2>Postup</h2>
                <p>
                    Do díže dáme vodu (22 °C), kvas a mouku. Pomalu mícháme 5 minut. V průběhu přidáme sůl a kmín. Pak
                    přidáme uvařené brambory a rychle mícháme ještě 10 minut. Těsto zapaříme moukou a necháme 30 minut stát
                    v díži.
                </p>
                <p>
                    Poté skoulíme a uděláme bochánek do ošatky s vysypaným plátnem. Necháme 20 minut venku, pak uložíme do
                    lednice na 14 hodin. Před pečením necháme natemperovat cca 30-60 minut tak, aby byl nakynutý. Chleba z
                    ošatky překlopíme přes ruce na pečicí papír, ometeme přebytečnou mouku, propíchneme špejlí a postříkáme
                    vodou.
                </p>
                <p>
                    Sázíme do předehřáté trouby na 250 °C, rozprašovačem do ní stříkneme vodu a pečeme cca 10 minut. Pak
                    teplotu snížíme na 200 °C a dopečeme cca 30 minut. Čas se může lišit podle výkonu trouby nebo pece.
                </p>
            </div>
        </div>
    </div>
    <style>
        /* CSS pro skrytí a zobrazení prvku */
        .hidden {
            display: none;
        }

        .visible {
            display: block;
            animation: fadeIn 0.3s;
            /* Přidává efekt postupného objevení */
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
            }

            to {
                opacity: 1;
            }
        }
    </style>
    <script>
        const preparationSteps = [
            { name: 'Začátek vedení kvásku', duration: 0 },
            { name: 'První přidání mouky a vody do kvásku', duration: 270 }, // 4.5 hours
            { name: 'Druhé přidání mouky a vody, když je kvásek hladový', duration: 360 }, // 6 hours
            { name: 'Třetí přidání mouky a vody, když je kvásek opět hladový', duration: 210 }, // 3.5 hours
            { name: 'Míchání těsta', duration: 15 }, // 15 minutes
            { name: 'První odpočinek těsta', duration: 30 }, // 30 minutes
            { name: 'Formování bochánku a odpočinek na pokojové teplotě', duration: 20 }, // 20 minutes
            { name: 'Chlazení těsta v lednici', duration: 840 }, // 14 hours
            { name: 'Temperovaní těsta před pečením', duration: 45 }, // Average of 30-60 minutes
            { name: 'Pečení na 250 °C', duration: 10 }, // 10 minutes
            { name: 'Pečení na 200 °C', duration: 30 }, // 30 minutes
            { name: 'Hotovo', duration: 0 }
        ];

        function calculateSchedule() {
            const startDateTime = document.getElementById('startDateTime').value;
            if (!startDateTime) {
                alert('Prosím zadejte startovní datum a čas.');
                return;
            }

            let currentDateTime = new Date(startDateTime);
            let lastDate = currentDateTime.toLocaleDateString();
            let scheduleHTML = '<h3>Časy jednotlivých kroků:</h3>';

            preparationSteps.forEach((step, index) => {
                let currentDate = currentDateTime.toLocaleDateString();
                if (lastDate !== currentDate) {
                    scheduleHTML += '<hr>';  // Horizontální čára jako oddělovač mezi dny
                    lastDate = currentDate;
                }
                scheduleHTML += `<p>${currentDateTime.toLocaleString()}: Krok ${index + 1} - ${step.name}</p>`;
                currentDateTime = new Date(currentDateTime.getTime() + step.duration * 60000); // Přidání minuty
            });

            document.getElementById('schedule').innerHTML = scheduleHTML;
            // Zobrazí plán s animací
            document.getElementById('schedule').classList.remove('hidden');
            document.getElementById('schedule').classList.add('visible');
        }

        function saveDateTime() {
            const selectedDateTime = document.getElementById('startDateTime').value;
            if (selectedDateTime) {
                localStorage.setItem('selectedDateTime', selectedDateTime);
            }
        }

        function loadDateTime() {
            const savedDateTime = localStorage.getItem('selectedDateTime');
            if (savedDateTime) {
                document.getElementById('startDateTime').value = savedDateTime;
                calculateSchedule();
            }
        }

        // Přidáme posluchač události na tlačítko, aby se uložil čas při jeho kliknutí
        const calcButton = document.querySelector('button');
        calcButton.addEventListener('click', () => {
            saveDateTime(); // Uloží vybrané datum a čas
            calculateSchedule(); // Spustí výpočet plánu
        });

        // Načteme uložené datum a čas při načtení stránky
        document.addEventListener('DOMContentLoaded', function() {
            const coll = document.getElementsByClassName("collapsible");

            for (let i = 0; i < coll.length; i++) {
                coll[i].addEventListener("click", function() {
                    this.classList.toggle("active");
                    const content = this.nextElementSibling;
                    if (content.style.maxHeight){
                        content.style.maxHeight = null;
                    } else {
                        content.style.maxHeight = content.scrollHeight + "px";
                    } 
                });
            }

            // Načtení a vypočet plánu při načtení stránky
            loadDateTime();
        });
    </script>
</body>

</html>
